<div class="view-buttons">
  <button 
    (click)="selectedView.set('month')" 
    [class.active]="selectedView() === 'month'">Month</button>
  <button 
    (click)="selectedView.set('week')" 
    [class.active]="selectedView() === 'week'">Week</button>
  <button 
    (click)="selectedView.set('day')" 
    [class.active]="selectedView() === 'day'">Day</button>
</div>

<div *ngIf="selectedView() === 'month'">
<div class="calendar-container">
  <div class="calendar">
    <div class="calendar-headline">
      <div class="calendar-headline-month">
        {{ firstDayOfActiveMonth().monthShort }},
        {{ firstDayOfActiveMonth().year }}
      </div>
      <div class="calendar-headline-controls">
        <div class="calendar-headline-control" (click)="goToPreviousMonth()">
          «
        </div>
        <div
          class="calendar-headline-control calendar-headline-control-today"
          (click)="goToToday()"
        >
          Today
        </div>
        <div class="calendar-headline-control" (click)="goToNextMonth()">»</div>
      </div>
    </div>
    <div class="calendar-weeks-grid">
      @for (weekDay of weekDays(); track $index) {
        <div class="calendar-weeks-grid-cell">{{ weekDay }}</div>
      }
    </div>
    <div class="calendar-grid">
      @for (dayOfMonth of daysOfMonth(); track $index) {
        <div
          [ngClass]="{
            'calendar-grid-cell': true,
            'calendar-grid-cell-active':
              activeDay()?.toISODate() === dayOfMonth.toISODate(),
            'calendar-grid-cell-inactive':
              dayOfMonth.month !== firstDayOfActiveMonth().month
          }"
          (click)="activeDay.set(dayOfMonth)"
        >
          {{ dayOfMonth.day }}
        </div>
      }
    </div>
  </div>
</div>
</div>

<div *ngIf="selectedView() === 'week'">
<div class="week-view-container">
  <div class="week-view-header">
    <div class="time-column-header"></div>
    <div class="day-header" *ngFor="let date of weekDates()">
      {{ date.toFormat('ccc L/dd') }}
    </div>
  </div>
  <div class="week-view-body">
    <div class="time-column">
      <div class="time-slot" *ngFor="let hour of hours">
        {{ hour }}
      </div>
    </div>
    <div class="day-column" *ngFor="let date of weekDates()">
      <div class="time-slot" *ngFor="let hour of hours">      
      </div>
    </div>
  </div>
</div>
</div>


<div *ngIf="selectedView() === 'day'">
<div class="day-view-container">
  <h2>{{ dayDate().toFormat('cccc, LLLL dd') }}</h2>
  <div class="day-view-body">
    <div class="time-slot" *ngFor="let hour of hours">
      <div class="time-label">{{ hour }}</div>
      <div class="day-slot"></div> 
    </div>
  </div>
</div>
</div>
